@author Nate Vogel
@website http://funtothinkabout.com

## Overview ##

HeavyWeatherReader (HWR) parses data file output by the La Crosse Weather Station (WS)
software for storage in a MySQL DB. HWR maintains a persistent connection to
MySQL while it is active. Control+C (SIGINT) is the proper method to exit.

HWR is written to support source weather data generated by:
   * "Standard Version Heavy Weather PC Interface Software For WS-2800 Series" Heavy Weather Pro 2800 (HWP)
   * http://www.lacrossetechnology.com/alerts/pws/software/setup_hw_wv5_us-1.5.4.exe http://www.lacrossetechnology.com/support/software.php

IMPORTANT NOTE for La Crosse WS PC SOFTWARE:
  * Unless the "Heavy Weather Pro WS 2800" application is in the foreground on your PC, you will *probably* only receive weather station updates every 60 seconds (or 5 minutes by default). Maximum observed updates at 13 second intervals (the heavy weather application can be finicky).

HWR_WUnderground (HWR_WU) reads data stored by HWR and uploads it to WeatherUnderground. Format complies by the WU API format doc: http://wiki.wunderground.com/index.php/PWS_-_Upload_Protocol

## Data Flow "Diagram" ##
    _La Crosse Temp-Hygro/Wind/Rain Sensors_ -> _La Crosse WS_ -> _Windows PC running HWPro_
    -> _HWR_ (hwreader.py) -> MySQL -> _HWR_WU_ (hwr_wunderground.py) -> WUnderground.com


## HWR(_WU) Installation and Usage##
* Requirements: (Tested on CYGWIN, should work against any OS with) Python 2.7 and PyMySQL package. Access to a MySQL database server.
- MySQL database setup.
        - Create a new 'weather_data' database and execute create table syntax that follows
```SQL
CREATE TABLE `raw_stats` (
`meta_actualisation` int(11) unsigned NOT NULL DEFAULT '0',
`meta_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`meta_datehour` datetime NOT NULL,
`temperature_indoor` decimal(4,1) DEFAULT NULL,
`temperature_outdoor` decimal(4,1) DEFAULT NULL,
`temperature_dewpoint` decimal(4,1) DEFAULT NULL,
`rain_1h` decimal(5,2) DEFAULT NULL,
`rain_24h` decimal(5,2) DEFAULT NULL,
`rain_total` decimal(5,2) DEFAULT NULL,
`wind_direction` char(3) DEFAULT NULL,
`wind_direction_deg` decimal(4,1) DEFAULT NULL,
`wind_speed` decimal(4,1) DEFAULT NULL,
`wind_chill` decimal(5,2) DEFAULT NULL,
`humidity_indoor` int(3) unsigned DEFAULT NULL,
`humidity_outdoor` int(3) unsigned DEFAULT NULL,
`pressure_relative_inhg` decimal(4,2) DEFAULT NULL,
PRIMARY KEY (`meta_actualisation`),
KEY `meta_datehour` (`meta_datehour`)
) ENGINE=InnoDB;
```
        - Create a hwreader user, used to insert and read from the new weather_data DB.
```SQL
CREATE user 'hwreader'@'%' identified by 'somepassw0rd';
GRANT select,insert,update on weather_data.* to hwreader@'%';
```
- Applications setup and startup.
    - Copy hwreader.ini.default to hwreader.ini and edit appropriately.  
    - Do the same with hwr_wunderground.ini.default.  
    - Start a couple of screen processes, one with 'python hwreader.py' and the other 'python hwr_wunderground.py'.

